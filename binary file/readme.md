# –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞: –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ –æ –ø–æ–µ–∑–¥–∞—Ö

```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#define TRAIN_COUNT 5

typedef struct {
    char destination[50];    
    int number;
    int time[2];    
} Train;

void saveSingleTrain() {
    Train t[TRAIN_COUNT] = {
                    {"–ú–æ—Å–∫–≤–∞", 123, {14, 30}},
                    {"–°–∞–Ω–∫—Ç-–ü–∏—Ç–µ—Ä–±—É—Ä–≥", 1365, {19, 50}},
                    {"–ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫", 498, {21, 40}},
                    {"–ë–∏–π—Å–∫", 201, {22, 30}},
                    {"–ë–∞—Ä–Ω–∞—É–ª", 765, {2, 00}}
                };
    
    FILE *file = fopen("Train.dat","wb");
    if (!file){
        printf("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!");
        return;
    }

    size_t write = fwrite(t, sizeof(Train),TRAIN_COUNT,file);
    if (write != 5) {
        printf("–û—à–∏–±–∫–∞ –∑–∞–ø–∏—Å–∏!\n");
    }
    
    fclose(file);
    printf("–ü–æ–µ–∑–¥ —É—Å–ø–µ—à–Ω–æ —Å–æ—Ö—Ä–∞–Ω—ë–Ω!\n");
}

void readTrains(){
    FILE *file = fopen("Train.dat","rb");
    if (!file){
        printf("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!");
        return;
    }
    
    fseek(file,0,SEEK_END); // –ø–µ—Ä–µ–º–µ—Å—Ç–∏–ª —É–∫–∞–∑–∞—Ç–µ–ª—å –≤ –∫–æ–Ω–µ—Ü, —á—Ç–æ–± –ø–æ—Å–ª–µ –≤—ã—á–∏—Å–ª–∏—Ç—å
                            // –∫–æ–ª-–≤–æ –±–∞–π—Ç
    long fileSize=ftell(file); // ftell() –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–µ–∫—É—â—É—é –ø–æ–∑–∏—Ü–∏—é —É–∫–∞–∑–∞—Ç–µ–ª—è
                               // –ø–æ—Å–∫–æ–ª—å–∫—É –º—ã –≤ –∫–æ–Ω—Ü–µ —Ñ–∞–π–ª–∞, —ç—Ç–æ –¥–∞—ë—Ç –Ω–∞–º —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ –±–∞–π—Ç–∞—Ö
    rewind(file);
    int count=fileSize/sizeof(Train);
    Train *trains=malloc(fileSize);
    fread(trains, sizeof(Train), count, file);

    printf("\n–°–ø–∏—Å–æ–∫ —Ä–µ–π—Å–æ–≤: \n");
    printf("--------------------------------------------\n");

    for (int i=0; i<count;i++){
        printf("%d\t%-15s\t%d\t%02d:%02d\n", 
            i+1,
            trains[i].destination, 
            trains[i].number, 
            trains[i].time[0], 
            trains[i].time[1]);
    }
    free(trains);
    fclose(file);
}  

void searchTrains(){
    char search[50];
    printf("–í–≤–µ–¥–∏—Ç–µ –ø—É–Ω–∫—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è: ");
    scanf("%49s",search);
    
    FILE *file = fopen("Train.dat","rb");
    if (!file){
        printf("–§–∞–π–ª –Ω–µ –Ω–∞–π–¥–µ–Ω!");
        return;
    }
    Train t;
    int found = 0;
    
    printf("\n–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞:\n");
    printf("--------------------------------------------\n");

    while (fread(&t, sizeof(Train), 1, file) == 1) {
        if (strcmp(t.destination, search) == 0) {
            printf("%-15s\t%d\t%02d:%02d\n",
                   t.destination,
                   t.number,
                   t.time[0],
                   t.time[1]);
            found = 1;
        }
    }
    
    if (!found) {
        printf("–ü–æ–µ–∑–¥–æ–≤ –≤ '%s' –Ω–µ –Ω–∞–π–¥–µ–Ω–æ.\n", search);
    }
    
    fclose(file);
}

int main() {
    int choice;
    printf("\n–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –ø–æ–µ–∑–¥–æ–≤:\n");
    printf("1. –°–æ–∑–¥–∞—Ç—å/–ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ\n");
    printf("2. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø–æ–µ–∑–¥–∞\n");
    printf("3. –ü–æ–∏—Å–∫ –ø–æ –ø—É–Ω–∫—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è\n");
    printf("–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: ");
    scanf("%d", &choice);
    switch (choice){
    case 1:
        saveSingleTrain();
        break;
    case 2:
        readTrains();
        break;
    case 3:
        searchTrains();
        break;
    default:
        printf("–û—à–∏–±–∫–∞ –≤–≤–æ–¥–∞!");
        break;
    }
    return 0;
}
```

## üöÇ –û–±–∑–æ—Ä
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –ø–æ–µ–∑–¥–æ–≤, —Ä–µ–∞–ª–∏–∑—É—é—â–∞—è:
- –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∏–Ω–∞—Ä–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è
- –ü–æ–∏—Å–∫ –ø–æ–µ–∑–¥–æ–≤ –ø–æ –ø—É–Ω–∫—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- –ü—Ä–æ—Å—Ç–æ–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –º–µ–Ω—é

## üìã –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö**:
  ```c
  typedef struct {
      char destination[50];    // –ü—É–Ω–∫—Ç –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
      int number;              // –ù–æ–º–µ—Ä –ø–æ–µ–∑–¥–∞
      int time[2];             // –í—Ä–µ–º—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è [—á–∞—Å—ã, –º–∏–Ω—É—Ç—ã]
  } Train;
  ```

- **–û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏**:
  - –ó–∞–ø–∏—Å—å –º–∞—Å—Å–∏–≤–∞ –ø–æ–µ–∑–¥–æ–≤ –≤ –±–∏–Ω–∞—Ä–Ω—ã–π —Ñ–∞–π–ª
  - –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∑–∞–ø–∏—Å–µ–π
  - –ü–æ–∏—Å–∫ –ø–æ –ø—É–Ω–∫—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
1. **–†–∞–±–æ—Ç–∞ —Å —Ñ–∞–π–ª–∞–º–∏**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è
   - –§—É–Ω–∫—Ü–∏–∏ `fseek`, `ftell` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –ø–æ–¥ –¥–∞–Ω–Ω—ã–µ

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
   ```c
   void saveSingleTrain();     // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   void readTrains();          // –ß—Ç–µ–Ω–∏–µ –∏ –≤—ã–≤–æ–¥ –≤—Å–µ—Ö –ø–æ–µ–∑–¥–æ–≤
   void searchTrains();        // –ü–æ–∏—Å–∫ –ø–æ –ø—É–Ω–∫—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
   ```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å
1. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—É:
   ```bash
   gcc trains.c -o trains
   ```
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ:
   ```bash
   ./trains
   ```
3. –í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ –≤ –º–µ–Ω—é:
   - 1: –°–æ–∑–¥–∞—Ç—å/–ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
   - 2: –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø–æ–µ–∑–¥–∞
   - 3: –ù–∞–π—Ç–∏ –ø–æ–µ–∑–¥–∞ –ø–æ –ø—É–Ω–∫—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
   - 4: –í—ã—Ö–æ–¥

## üìå –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã
```
–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –ø–æ–µ–∑–¥–æ–≤:
1. –°–æ–∑–¥–∞—Ç—å/–ø–µ—Ä–µ–∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ
2. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –ø–æ–µ–∑–¥–∞
3. –ü–æ–∏—Å–∫ –ø–æ –ø—É–Ω–∫—Ç—É –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
4. –í—ã—Ö–æ–¥
–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ: 2

–°–ø–∏—Å–æ–∫ –ø–æ–µ–∑–¥–æ–≤:
–°–ø–∏—Å–æ–∫ —Ä–µ–π—Å–æ–≤: 
--------------------------------------------
1       –ú–æ—Å–∫–≤–∞          123     14:30
2       –°–∞–Ω–∫—Ç-–ü–∏—Ç–µ—Ä–±—É—Ä–≥ 1365    19:50
3       –ù–æ–≤–æ—Å–∏–±–∏—Ä—Å–∫     498     21:40
4       –ë–∏–π—Å–∫           201     22:30
5       –ë–∞—Ä–Ω–∞—É–ª         765     02:00
```

## üìà –í–æ–∑–º–æ–∂–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–æ–º–µ—Ä—É –ø–æ–µ–∑–¥–∞ –∏ –≤—Ä–µ–º–µ–Ω–∏
- –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∑–∞–ø–∏—Å–µ–π
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∏–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
